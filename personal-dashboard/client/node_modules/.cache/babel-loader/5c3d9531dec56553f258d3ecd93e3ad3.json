{"ast":null,"code":"import _objectSpread from \"/Users/Fichter/personal-dashboard/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/Fichter/personal-dashboard/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Fichter/personal-dashboard/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Fichter/personal-dashboard/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Fichter/personal-dashboard/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Fichter/personal-dashboard/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/Fichter/personal-dashboard/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/Fichter/personal-dashboard/client/src/week/WeekApp.jsx\";\nimport React, { Component } from 'react';\nimport WeeklyPlanner from './WeeklyPlanner';\nimport WeekInitializer from './WeekInitializer';\n\nvar WeekApp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WeekApp, _Component);\n\n  function WeekApp(props) {\n    var _this;\n\n    _classCallCheck(this, WeekApp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WeekApp).call(this, props));\n    _this.state = {};\n    _this.displayWeek = _this.displayWeek.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchWeeks = _this.fetchWeeks.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.createWeek = _this.createWeek.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.initializeWeek = _this.initializeWeek.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.displayLatestWeek = _this.displayLatestWeek.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(WeekApp, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.displayLatestWeek();\n    }\n  }, {\n    key: \"displayLatestWeek\",\n    value: function displayLatestWeek() {\n      var _this2 = this;\n\n      this.fetchWeeks().then(function () {\n        return _this2.displayWeek(_this2.state.weeks[_this2.state.weeks.length - 1]);\n      });\n    }\n  }, {\n    key: \"displayWeek\",\n    value: function displayWeek(activeWeek) {\n      this.setState({\n        activeWeek: activeWeek\n      });\n    }\n  }, {\n    key: \"fetchWeeks\",\n    value: function fetchWeeks() {\n      var _this3 = this;\n\n      return fetch('/weeks').then(function (res) {\n        return res.json();\n      }).then(function (weeks) {\n        return _this3.setState({\n          weeks: weeks\n        });\n      });\n    }\n  }, {\n    key: \"createWeek\",\n    value: function createWeek() {\n      var options = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          initialized: false\n        })\n      };\n      fetch('/weeks', options).then(this.displayLatestWeek);\n    }\n  }, {\n    key: \"initializeWeek\",\n    value: function initializeWeek() {\n      var options = {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(_objectSpread({}, week, {\n          initialized: true\n        }))\n      };\n      fetch('/weeks', options).then(this.displayLatestWeek);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          weeks = _this$state.weeks,\n          activeWeek = _this$state.activeWeek;\n      var allWeeks = weeks ? React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, weeks.map(function (week) {\n        return React.createElement(\"li\", {\n          onClick: function onClick() {\n            return _this4.displayWeek(week);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, \"Week \", week.id);\n      })) : React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"loading...\");\n      var currentWeek;\n\n      if (activeWeek) {\n        currentWeek = activeWeek.initialized ? React.createElement(WeeklyPlanner, {\n          week: activeWeek,\n          fetchWeeks: this.fetchWeeks,\n          createWeek: this.createWeek,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }) : React.createElement(WeekInitializer, {\n          week: activeWeek,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        });\n      } else {\n        currentWeek = React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, \"loading...\");\n      }\n\n      return React.createElement(React.Fragment, null, allWeeks, currentWeek);\n    }\n  }]);\n\n  return WeekApp;\n}(Component);\n\nexport default WeekApp;","map":{"version":3,"sources":["/Users/Fichter/personal-dashboard/client/src/week/WeekApp.jsx"],"names":["React","Component","WeeklyPlanner","WeekInitializer","WeekApp","props","state","displayWeek","bind","fetchWeeks","createWeek","initializeWeek","displayLatestWeek","then","weeks","length","activeWeek","setState","fetch","res","json","options","method","headers","body","JSON","stringify","initialized","week","allWeeks","map","id","currentWeek"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport WeeklyPlanner from './WeeklyPlanner';\nimport WeekInitializer from './WeekInitializer';\n\nclass WeekApp extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.displayWeek = this.displayWeek.bind(this);\n    this.fetchWeeks = this.fetchWeeks.bind(this);\n    this.createWeek = this.createWeek.bind(this);\n    this.initializeWeek = this.initializeWeek.bind(this);\n    this.displayLatestWeek = this.displayLatestWeek.bind(this);\n  } \n\n  componentDidMount() {\n    this.displayLatestWeek();\n  }\n\n  displayLatestWeek() {\n    this.fetchWeeks()\n      .then(() => this.displayWeek(this.state.weeks[this.state.weeks.length -1]));\n  }\n\n  displayWeek(activeWeek) {\n    this.setState({ activeWeek });\n  }\n\n  fetchWeeks() {\n    return fetch('/weeks')\n      .then(res => res.json())\n      .then(weeks => this.setState({ weeks }));\n  }\n\n  createWeek() {\n    const options = {\n      method:'POST',\n      headers: {'Content-Type':'application/json'},\n      body: JSON.stringify({initialized: false})\n    }\n    fetch('/weeks', options)\n      .then(this.displayLatestWeek);\n  }\n\n  initializeWeek() {\n    const options = {\n      method:'PUT',\n      headers: {'Content-Type':'application/json'},\n      body: JSON.stringify({ ...week, initialized: true })\n    }\n    fetch('/weeks', options)\n      .then(this.displayLatestWeek);\n  }\n\n  render() {\n    const { weeks, activeWeek } = this.state;\n\n    const allWeeks = weeks\n    ? (<ul>\n      {weeks.map(week => <li onClick={() => this.displayWeek(week)}>Week {week.id}</li>)}\n    </ul>)\n    : <p>loading...</p>;\n\n    let currentWeek;\n    if (activeWeek) {\n      currentWeek = activeWeek.initialized\n      ? (\n        <WeeklyPlanner week={activeWeek} fetchWeeks={this.fetchWeeks} createWeek={this.createWeek}/>\n      )\n      : <WeekInitializer week={activeWeek} />;\n    } else {\n      currentWeek = <p>loading...</p>;\n    }\n\n    return(\n      <>\n        {allWeeks}\n        {currentWeek}\n      </>\n    )\n  }\n}\n\nexport default WeekApp;"]},"metadata":{},"sourceType":"module"}